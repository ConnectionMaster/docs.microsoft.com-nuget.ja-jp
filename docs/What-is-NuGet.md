---
title: "NuGet とは何か。またどのような働きをするのか | Microsoft Docs"
author: kraigb
ms.author: kraigb
manager: ghogen
ms.date: 10/26/2017
ms.topic: hero-article
ms.prod: nuget
ms.technology: 
ms.assetid: c3faf278-4cbf-4733-96f6-9ee9f7203af9
description: "NuGet とは何で、どのような働きをするのかについて、総合的に紹介します"
keywords: "NuGet パッケージ マネージャー, 消費量, パッケージの作成, パッケージのホスト"
ms.reviewer:
- karann-msft
- unniravindranathan
ms.openlocfilehash: 29dcedf33a54e249fe0b6acf588e4aafde28304f
ms.sourcegitcommit: d0ba99bfe019b779b75731bafdca8a37e35ef0d9
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/14/2017
---
# <a name="an-introduction-to-nuget"></a>NuGet の概要

最新の開発プラットフォームに欠かせないツールは、開発者がコードの役に立つライブラリを作成、共有、および使用するために利用できるメカニズムです。 このようなライブラリは、コンパイル済みのコード (DLL) と共に、ライブラリを使うプロジェクトで必要な他のコンテンツを含むことができるため、一般に "パッケージ" と呼ばれます。

.NET のコード共有メカニズムである **NuGet** では、.NET 用のパッケージを作成、ホスト、使用する方法が定義されており、それらの各ロール用のツールが提供されています。 

つまり、NuGet パッケージは、拡張子が `.nupkg` の 1 つの ZIP ファイルであり、コンパイル済みのコード (DLL)、そのコードに関連する他のファイル、パッケージのバージョン番号などの情報が記述されているマニフェストが含まれます。 ライブラリ開発者は、パッケージ ファイルを作成して、ホストに公開します。 パッケージ利用者は、これらのパッケージを受け取り、プロジェクトに追加した後、プロジェクトのコードでライブラリの機能を呼び出します。 その過程での細部はすべて NuGet 自体が処理します。

## <a name="the-flow-of-packages-between-creators-hosts-and-consumers"></a>作成者、ホスト、利用者の間のパッケージのフロー

ホストとしての役割の NuGet は、一般公開されている 60,000 以上の個別パッケージを、[nuget.org](https://www.nuget.org) の中央リポジトリで保持します。これらのパッケージを、毎日数百万人の .NET 開発者が使用しています。 また、NuGet を使うと、クラウド、プライベート ネットワーク、さらにはローカル ファイル システムで、プライベートにパッケージをホストすることもできます。 これにより、これらのパッケージは特定の組織や顧客グループ内の開発者だけが利用できるようになります。 オプションの説明については、「[Hosting your own NuGet feeds](Hosting-Packages/Overview.md)」(独自の NuGet フィードのホスト) をご覧ください。

ホストは、それがどのような性質のであっても、パッケージの "*作成者*" と "*利用者*" の間の接続ポイントとして機能します。 作成者は、便利な NuGet パッケージを作成して、ホストに公開します。 利用者は、アクセスできるホストで役に立ち互換性のあるパッケージを検索し、ダウンロードしてプロジェクトに組み込みます。 プロジェクトにインストールされたパッケージの API は、プロジェクト コードの他の部分から利用できます。

![パッケージ作成者、パッケージ ホスト、パッケージ利用者の間の関係](media/nuget-roles.png)

この場合の "互換性のある" パッケージとは、パッケージを使用するプロジェクトのターゲット フレームワークと互換性のある少なくとも 1 つの .NET Framework 用にビルドされたアセンブリが含まれていることを意味します。 広範な互換性を持つパッケージにするには、作成者は、さまざまなターゲット フレームワーク用に個別のアセンブリをコンパイルし、そのすべてを同じパッケージに収めます。 利用者がそのパッケージをインストールすると、NuGet はプロジェクトで必要なアセンブリだけを抽出します。 これにより、最終的なアプリケーションやそのプロジェクトによって生成されるアセンブリでのパッケージのフットプリントが最小になります。

## <a name="nuget-tools"></a>NuGet のツール

ホストのサポートに加えて、NuGet では作成者と利用者の両方が使用できるさまざまなツールも提供されています。

| ツール | プラットフォーム | 該当シナリオ | 説明 |
| --- | --- | --- | --- |
| [nuget.exe CLI](Tools/nuget-exe-CLI-Reference.md) | すべて | 作成、利用 | NuGet のすべての機能を提供します。パッケージ作成者のみに適用されるコマンド、利用者のみに適用されるもの、両方に適用されるものがあります。 たとえば、`nuget pack` コマンドはパッケージ作成者がさまざまなアセンブリと関連ファイルからパッケージを作成するために使い、`nuget install` はパッケージ利用者がプロジェクトにパッケージを組み込むために使い、`nuget config` は全ユーザーが NuGet 構成の変数を設定するために使います。  |
| [パッケージ マネージャー UI](Tools/Package-Manager-UI.md) | Windows の Visual Studio | 利用 | .NET プロジェクトでパッケージをインストールして管理するための使いやすい UI を提供します。 | 
| [NuGet 管理 UI](https://docs.microsoft.com/visualstudio/mac/nuget-walkthrough) | Visual Studio for Mac | 利用 | .NET プロジェクトでパッケージをインストールして管理するための使いやすい UI を提供します。 |
| [パッケージ マネージャー コンソール](Tools/Package-Manager-Console.md) | Windows の Visual Studio | 利用 | .NET プロジェクトでパッケージをインストールして管理するための [PowerShell コマンド](Tools/Powershell-Reference.md)を提供します。 | 
| [dotnet CLI](Tools/dotnet-Commands.md) | すべて | 作成、利用 | .NET Core ツール チェーン内で直接、特定の NuGet CLI 機能を提供します。 |
| [MSBuild](Schema/msbuild-targets.md) | Windows | 作成、利用 | パッケージを作成し、MSBuild ツールチェーンを介してプロジェクトで使われたパッケージを直接復元できます。 |

このように、NuGet のどのツールを使うかは、パッケージを作成 (および発行) しているのか、それとも利用しているのかということと、使っているプラットフォームに、大きく依存します。 詳しくは、「[Package creation workflow](Create-Packages/Overview-and-Workflow.md)」(パッケージ作成のワークフロー) と「[Package consumption workflow](Consume-Packages/Overview-and-Workflow.md)」(パッケージ利用のワークフロー) およびこれらのセクションの他のトピックをご覧ください。 

パッケージ作成者は、通常、他の NuGet パッケージの機能を基にして開発を行うので、利用者でもあります。 そして、これらのパッケージは、もちろん、他のパッケージにさらに依存している場合があります。

## <a name="managing-dependencies"></a>依存関係の管理

他の開発者の作業を簡単に利用できることは、パッケージ管理システムを非常に強力なものにしている機能の 1 つです。 したがって、NuGet の機能の多くは、プロジェクトに代わって依存関係ツリーつまり "グラフ" を管理することです。 簡単に言えば、開発者が関心を持つ必要があるのは、プロジェクト内で直接使っているパッケージだけです。 そのようなパッケージ自体のいずれかで他のパッケージ (それがさらにパッケージを利用していることがあります) が利用されている場合、ダウンレベルの依存関係はすべて NuGet が処理します。

次の図で示すプロジェクトは、5 つのパッケージに依存しており、それらがさらに他の複数のパッケージに依存しています。  

![.NET プロジェクトの NuGet 依存関係グラフの例](media/dependency-graph.png)

依存関係グラフの複数の箇所に出現しているパッケージがあることに注意してください。 たとえば、パッケージ B には 3 つの異なるコンシューマーがあり、各コンシューマーがそのパッケージの異なるバージョンを指定している可能性もあります (図には示されていません)。 これはよくあることなので、すべてのコンシューマーの要求を満たすパッケージ B のバージョンを正確に特定する困難な作業はすべて、NuGet が行ってくれます。 その後、NuGet は、依存関係グラフの深さに関係なく、他のすべてのパッケージについても同じように処理します。

NuGet がこのサービスを実行する方法について詳しくは、[依存関係の解決](Consume-Packages/Dependency-Resolution.md)に関するページをご覧ください。

## <a name="tracking-references-and-restoring-packages"></a>参照の追跡とパッケージの復元

プロジェクトは開発者のコンピューター、ソース管理リポジトリ、ビルド サーバーなどの間を簡単に移動するので、プロジェクトに直接バインドされた NuGet パッケージからバイナリ アセンブリを維持するのは極めて困難です。 プロジェクトの各コピーが必要以上に肥大化する (それにより、ソース管理リポジトリ内の領域を浪費する) だけでなく、パッケージのバイナリを新しいバージョンに更新する処理も、プロジェクトの全コピーについて行う必要があるため、非常に困難になります。 

代わりに、NuGet は、単にプロジェクトが依存するパッケージの参照リストを保持し (最上位と下位レベルの依存関係を含みます)、要求に応じて参照されているすべてのパッケージを復元する手段を提供します (「[パッケージ復元](Consume-Packages/Package-Restore.md)」を参照)。 つまり、どこかのホストからプロジェクトにパッケージをインストールすると常に、NuGet によってパッケージの ID とバージョン番号がこの参照リストに記録されます  (もちろん、パッケージをアンインストールするとリストから削除されます)。 

![NuGet の参照リストはパッケージのインストール時に作成され、別の場所にパッケージを復元するために使うことができる](media/nuget-restore.png)

それ以降いつでも、NuGet は、参照リストのみを使って、パブリック ホストやプライベート ホストからすべてのパッケージを再インストール、つまり復元できます。 このため、nuget.org では、公開されたパッケージを非公開にすることはできますが、完全に削除することはできません (「[Deleting packages](Policies/deleting-packages.md)」(パッケージの削除) を参照)。ソース管理にプロジェクトをコミットするとき、またはプロジェクトを他のなんらかの方法で共有するときは、参照リストを含めるだけでよく、パッケージのバイナリを含める必要はありません (「[パッケージとソース管理](Consume-Packages/Packages-and-Source-Control.md)」を参照)。

自動展開システムの一部としてプロジェクトのコピーを取得するビルド サーバーのような、プロジェクトを受け取るコンピューターは、必要なときに依存関係を復元するよう NuGet に要求するだけです。 Visual Studio Team Services などのビルド システムでは、この目的のための "NuGet 復元" ステップが提供されています。 同様に、開発者がプロジェクトのコピーを取得するときは (リポジトリを複製するときと同じように)、Visual Studio でプロジェクトを開いてビルドを実行すると、Visual Studio が自動的に必要な NuGet パッケージを復元します。 開発者は、パッケージ マネージャー コンソールで `nuget restore` CLI コマンドまたは`Install-Package` コマンドレットを使って、いつでも NuGet にパッケージの復元を指示できます。

その場合に開発者が関係する NuGet の主要な役割は明らかに、プロジェクトに代わってその参照リストを維持し、参照されているパッケージを効率的に復元 (および更新) する手段を提供することです。

その方法は NuGet のバージョンと共に変化しているため、次のように複数の "*パッケージ管理形式*" が存在します。

- [`packages.config`](Schema/packages-config.md): *(NuGet 1.0 以降)* プロジェクト内のすべての依存関係のフラット リストを保持する XML ファイルです。インストールされている他のパッケージの依存関係も含みます。 
- [`project.json`](Schema/project-json.md): *(NuGet 3.0 以降)* プロジェクトの依存関係のリストを保持する JSON ファイルです。全体的なパッケージ グラフは関連するファイル `project.lock.json` に含まれます。 この構造は `packages.config` よりパフォーマンスがよく (「[NuGet でのパッケージ依存関係の解決方法](Consume-Packages/Dependency-Resolution.md)」を参照)、推移的な復元を含みますが、一般に以下の PackageReference に置き換えられています。
- [プロジェクト ファイルでのパッケージ参照](Consume-Packages/Package-References-in-Project-Files.md) ("PackageReference" とも呼ばれます) | *(NuGet 4.0 以降)* プロジェクトの最上位レベルの依存関係のリストがプロジェクト ファイル内に直接保持されるので、別のファイルは必要ありません。 関連するファイル `project.assets.json` は、全体的な依存関係グラフを管理するために `project.lock.json` のように動的に生成されます。

指定されたプロジェクトでどのパッケージ管理形式が採用されるかは、プロジェクトの種類と、NuGet および Visual Studio の使用可能なバージョンによって異なります。 使われている形式を確認するには、最初のパッケージをインストールした後で、プロジェクトのルートにある `packages.config` または `project.json` を調べます。 どちらのファイルも見つからない場合は、プロジェクト ファイルで直接 &lt;PackageReference&gt; 要素を調べます。

たとえば、Visual Studio 2017 では、プロジェクトのほとんどの種類は `packages.config` を使います (UWP C# と .NET Core プロジェクトだけは PackageReference を使います)。 

## <a name="what-else-does-nuget-do"></a>NuGet の他の機能

これまで説明した内容をまとめると、NuGet は (ホスティングの役割では) 集中リポジトリ nuget.org を提供し、プライベート ホスティングをサポートします。 NuGet は、開発者がパッケージの作成、公開、使用に必要なツールを提供します。 そして最も重要なことは、NuGet はプロジェクトで使われているパッケージの参照リストを保持し、そのリストからパッケージを更新および復元する機能を提供するということです。

これらの処理を効率的に実行するため、NuGet はバックグラウンドでいくつかの最適化を行います。 最も顕著なのは、NuGet がコンピューター全体とプロジェクト固有両方のパッケージ キャッシュを管理して、インストールと再インストールを短縮することです。 コンピューター全体のキャッシュに関しては、プロジェクトでダウンロードしてインストールしたすべてのパッケージはキャッシュに格納されるので、同じパッケージを別のプロジェクトでインストールするときに再度ダウンロードする必要はありません。 これは、ビルド サーバーなどのように多数のパッケージを頻繁に復元する場合は明らかに非常に役立ちます。 そのメカニズムと使い方について詳しくは、「[NuGet のキャッシュを管理する](Consume-Packages/Managing-the-Nuget-Cache.md)」をご覧ください。

個々のプロジェクトでは、NuGet は依存関係グラフ全体を管理するために多くの作業を行います  (`project.json` または &lt;PackageReference&gt; を使うときは、NuGet はそれぞれの情報を `project.lock.json` および `project.assets.json` という名前のセカンダリ ファイルに保持します)。これにはやはり、同じパッケージの異なるバージョンへの複数の参照の解決が含まれます。

つまり、プロジェクトが 1 つ以上のパッケージに依存関係を持ち、それらのパッケージ自体にも同じような依存関係があることは、ごく一般的なことです。 たとえば、nuget.org の最も便利なユーティリティ パッケージのいくつかは、他の多くのパッケージで使われています。 依存関係グラフ全体では、同じパッケージの異なるバージョンに対する 10 個の異なる参照が簡単にできてしまいます。 しかし、そのパッケージの複数のバージョンをアプリケーション自体に組み込みたくはないので、NuGet は誰でも使うことができる 1 つのバージョンを選別します  (詳しくは、このトピックの「[NuGet でのパッケージ依存関係の解決方法](Consume-Packages/Dependency-Resolution.md)」をご覧ください)。

さらに、NuGet は、パッケージの構成方法 ([ローカライズ](Create-Packages/Creating-Localized-Packages.md)と[デバッグ シンボル](Create-Packages/Symbol-Packages.md)を含みます) およびパッケージの参照方法 ([バージョン参照](reference/package-versioning.md#version-ranges-and-wildcards)と[プレリリース バージョン](create-packages/Prerelease-Packages.md)を含みます) に関するすべての仕様を保持しています。NuGet は、資格情報プロバイダー用の API (プライベート ホストへのアクセス用) および Visual Studio 拡張機能とプロジェクト テンプレートを作成する開発者用の API も提供します。

このドキュメントの目次を見るとわかるように、これらすべての機能に関するトピックと、最初の NuGet からのすべてのリリース ノートが提供されています。

## <a name="comments-contributions-and-issues"></a>コメント、投稿、問題

最後に、このドキュメントに関するコメントや投稿をお寄せください。各ページの **[コメント]** および **[編集]** コマンドを使うか、GitHub の[ドキュメント リポジトリ](https://github.com/NuGet/docs.microsoft.com-nuget/)および[ドキュメント問題リスト](https://github.com/NuGet/docs.microsoft.com-nuget/issues)にアクセスしてください。

また、[さまざまな GitHub リポジトリ](https://github.com/NuGet/Home)から NuGet 自体への投稿も歓迎します。NuGet の問題については、[https://github.com/NuGet/home/issues](https://github.com/NuGet/home/issues) をご覧ください。

NuGet のエクスペリエンスをお楽しみください。
